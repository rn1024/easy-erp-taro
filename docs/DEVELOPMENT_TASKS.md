# Taro + NutUI 管理后台小程序 - 开发任务清单

## 📅 项目时间规划 (总计6周)

### Phase 1: 基础架构搭建 (第1周)
### Phase 2: 核心功能开发 (第2-3周) 
### Phase 3: 高级功能开发 (第4-5周)
### Phase 4: 优化测试完善 (第6周)

---

## 🏗️ Phase 1: 基础架构搭建 (第1周)

### 1.1 项目初始化 (1天)
- [ ] **项目结构调整**
  - [ ] 清理现有demo页面和组件
  - [ ] 创建新的目录结构
  - [ ] 配置路由系统 (app.config.ts)
  - [ ] 设置页面分包策略

- [ ] **基础配置**
  - [ ] Zustand状态管理初始化
  - [ ] API服务基础封装
  - [ ] 错误处理机制
  - [ ] TypeScript类型定义完善

### 1.2 权限系统 (1天)
- [ ] **用户认证**
  - [ ] 登录状态检查中间件
  - [ ] Token存储和刷新机制
  - [ ] 路由守卫实现
  - [ ] 权限验证HOC组件

- [ ] **角色权限**
  - [ ] 角色权限配置
  - [ ] 页面级权限控制
  - [ ] 组件级权限控制

### 1.3 基础组件开发 (2天)
- [ ] **MobileLayout增强**
  - [ ] 导航栏定制
  - [ ] 底部TabBar集成
  - [ ] 页面加载状态
  - [ ] 错误边界处理

- [ ] **通用表格组件 DataTable**
  - [ ] 基于NutUI Table封装
  - [ ] 支持排序、筛选、分页
  - [ ] 移动端横向滚动优化
  - [ ] 字段配置化

- [ ] **通用表单组件 FormModal**
  - [ ] 基于NutUI Form封装
  - [ ] 支持新增/编辑模式
  - [ ] 表单验证集成
  - [ ] 动态字段生成

### 1.4 API服务架构 (1天)
- [ ] **请求封装**
  - [ ] Taro.request包装类
  - [ ] 请求/响应拦截器
  - [ ] 错误统一处理
  - [ ] 加载状态管理

- [ ] **Mock数据服务**
  - [ ] 开发环境Mock服务
  - [ ] 数据模型示例
  - [ ] API接口文档

---

## 🚀 Phase 2: 核心功能开发 (第2-3周)

### 2.1 登录模块 (1天)
- [ ] **登录页面** `/pages/login/`
  - [ ] 登录表单UI (NutUI Form + Input + Button)
  - [ ] 表单验证逻辑
  - [ ] 登录API调用
  - [ ] Token存储和页面跳转
  - [ ] 错误提示处理

- [ ] **登录状态管理**
  - [ ] 用户信息Zustand store
  - [ ] 登录状态持久化
  - [ ] 自动登录逻辑

### 2.2 信息查询模块 (3天)

#### 2.2.1 扫描功能 (1.5天)
- [ ] **扫描页面** `/pages/query/scan/`
  - [ ] 扫描按钮UI (MaterialIcons qr_code_scanner)
  - [ ] Taro.scanCode API集成
  - [ ] 扫描结果处理逻辑
  - [ ] 产品查询API调用

- [ ] **ScannerCard组件**
  - [ ] 扫描结果展示卡片
  - [ ] 产品信息格式化展示
  - [ ] 操作按钮 (重新扫描、查看详情)

- [ ] **扫描历史功能**
  - [ ] 扫描历史记录存储
  - [ ] 历史列表展示 (NutUI List)
  - [ ] 历史记录清除功能

#### 2.2.2 SKU搜索 (1.5天)
- [ ] **SKU搜索页面** `/pages/query/sku/`
  - [ ] 搜索框UI (NutUI SearchBar)
  - [ ] 实时搜索建议
  - [ ] 搜索结果列表 (NutUI List + Cell)
  - [ ] 搜索历史记录

- [ ] **搜索优化**
  - [ ] 防抖处理
  - [ ] 结果高亮显示
  - [ ] 支持扫码输入SKU
  - [ ] 无结果状态处理

### 2.3 库存管理模块 (4天)

#### 2.3.1 成品库存 (2天)
- [ ] **成品库存页面** `/pages/inventory/finished/`
  - [ ] Tab切换UI (成品库存/散件库存)
  - [ ] 数据表格展示 (复用DataTable组件)
  - [ ] 顶部筛选功能 (店铺、分类、货位)
  - [ ] 分页加载

- [ ] **成品库存操作**
  - [ ] 新增库存表单 (复用FormModal)
  - [ ] 编辑库存功能
  - [ ] 删除确认对话框
  - [ ] 字段验证规则

- [ ] **InventoryForm组件**
  - [ ] 成品库存专用表单字段
  - [ ] 外箱尺寸、装箱数量、重量输入
  - [ ] 货位选择器
  - [ ] 表单提交处理

#### 2.3.2 散件库存 (2天)
- [ ] **散件库存页面** `/pages/inventory/spare/`
  - [ ] 复用成品库存页面架构
  - [ ] 字段差异处理 (散件类型替代外箱信息)
  - [ ] 散件类型选择器 ('套'/'个')

- [ ] **散件库存专用功能**
  - [ ] 散件类型与数量单位联动
  - [ ] 库存操作表单适配
  - [ ] 数据验证规则调整

---

## 🔧 Phase 3: 高级功能开发 (第4-5周)

### 3.1 仓库任务模块 (5天)

#### 3.1.1 包装任务 (2.5天)
- [ ] **包装任务页面** `/pages/warehouse/package/`
  - [ ] Tab切换UI (包装任务/发货任务)
  - [ ] 任务列表展示
  - [ ] 状态流程显示 (NutUI Steps)
  - [ ] 进度条展示 (NutUI Progress)

- [ ] **TaskProgress组件**
  - [ ] 任务进度可视化
  - [ ] 状态步骤指示器
  - [ ] 进度百分比显示
  - [ ] 状态变更按钮

- [ ] **状态管理功能**
  - [ ] 状态选择器 (NutUI Select)
  - [ ] 滑动操作 (NutUI SwipeAction)
  - [ ] 批量状态更新
  - [ ] 状态变更确认

#### 3.1.2 发货任务 (2.5天)
- [ ] **发货任务页面** `/pages/warehouse/shipment/`
  - [ ] 复杂字段表格展示
  - [ ] 横向滚动优化 (NutUI Sticky + Table)
  - [ ] 关键字段置前显示
  - [ ] 详细信息展开/收起

- [ ] **ShipmentTable组件**
  - [ ] 发货任务专用表格
  - [ ] 字段优先级排序
  - [ ] 表格内容自适应
  - [ ] 状态标识优化

- [ ] **发货状态管理**
  - [ ] 复杂状态流程处理
  - [ ] 状态变更权限控制
  - [ ] 物流信息更新

### 3.2 产品管理模块 (2天)
- [ ] **产品列表页面** `/pages/products/`
  - [ ] 产品列表展示 (复用DataTable)
  - [ ] 关键字段优先显示 (店铺/分类/昵称)
  - [ ] 搜索功能 (NutUI SearchBar)
  - [ ] 高级筛选 (NutUI Drawer)

- [ ] **ProductTable组件**
  - [ ] 产品信息格式化展示
  - [ ] 字段显示优先级
  - [ ] 详情查看弹窗
  - [ ] 查询结果优化

- [ ] **ProductDetail组件**
  - [ ] 产品详情弹窗 (NutUI Popup)
  - [ ] 完整产品信息展示
  - [ ] 产品包装、外箱、配件信息
  - [ ] 备注信息显示

### 3.3 权限细化 (1天)
- [ ] **权限控制完善**
  - [ ] 页面级权限验证
  - [ ] 操作按钮权限控制
  - [ ] 数据权限过滤
  - [ ] 角色权限管理

---

## 🎯 Phase 4: 优化测试完善 (第6周)

### 4.1 性能优化 (2天)
- [ ] **代码优化**
  - [ ] 组件性能优化 (React.memo, useCallback)
  - [ ] 长列表虚拟滚动
  - [ ] 图片懒加载
  - [ ] 代码分割和懒加载

- [ ] **移动端优化**
  - [ ] 触摸反馈优化
  - [ ] 滚动性能提升
  - [ ] 内存使用优化
  - [ ] 包大小控制

### 4.2 错误处理和用户体验 (2天)
- [ ] **错误处理**
  - [ ] 网络错误处理
  - [ ] 数据加载失败处理
  - [ ] 表单验证错误提示
  - [ ] 操作失败回滚机制

- [ ] **用户体验优化**
  - [ ] 加载状态指示器
  - [ ] 空状态页面
  - [ ] 操作成功提示
  - [ ] 无网络状态处理

### 4.3 测试和文档 (1天)
- [ ] **功能测试**
  - [ ] 登录功能测试
  - [ ] 扫码功能测试
  - [ ] 库存管理测试
  - [ ] 任务管理测试
  - [ ] 权限控制测试

- [ ] **文档完善**
  - [ ] API接口文档
  - [ ] 组件使用文档
  - [ ] 部署说明文档
  - [ ] 用户操作手册

### 4.4 部署准备 (1天)
- [ ] **构建优化**
  - [ ] 生产环境配置
  - [ ] 包大小分析
  - [ ] 分包策略优化
  - [ ] 构建脚本完善

- [ ] **上线准备**
  - [ ] 微信小程序配置
  - [ ] 版本号管理
  - [ ] 发布流程文档

---

## 📦 组件开发优先级

### 高优先级组件 (Phase 1-2)
1. **MobileLayout** - 页面布局基础
2. **DataTable** - 数据展示核心
3. **FormModal** - 表单操作核心
4. **ScannerCard** - 扫描结果展示

### 中优先级组件 (Phase 3)
5. **TaskProgress** - 任务进度展示
6. **StatusSelector** - 状态选择操作
7. **FilterDrawer** - 高级筛选功能
8. **ProductDetail** - 产品详情展示

### 低优先级组件 (Phase 4)
9. **LoadingIndicator** - 加载状态指示
10. **EmptyState** - 空状态展示
11. **ErrorBoundary** - 错误边界处理

---

## 🔧 技术实现要点

### 关键技术挑战
1. **移动端表格** - 横向滚动 + 固定列
2. **扫码集成** - Taro.scanCode API
3. **权限控制** - 细粒度权限验证
4. **状态管理** - 复杂业务状态同步
5. **性能优化** - 长列表 + 实时搜索

### 技术方案
- **表格滚动**: NutUI Sticky + Table + CSS横向滚动
- **扫码功能**: Taro原生API + 错误处理
- **权限系统**: HOC + Route Guard + 权限枚举
- **状态管理**: Zustand + 持久化 + 乐观更新
- **性能优化**: React.memo + 虚拟滚动 + 防抖

---

**确认要点**:
1. 开发时间规划是否合理？
2. 任务优先级是否正确？
3. 技术实现方案是否可行？
4. 是否有遗漏的关键功能？ 